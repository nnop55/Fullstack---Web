<div class="overlay">
  <div class="container">
    <div class="header">
      <img
        (click)="onCloseClick()"
        src="../../../../assets/icons/close.svg"
        alt=""
        class="icon"
      />
    </div>
    <div class="body">
      <app-stepper
        [activeStep]="step"
        [stepCount]="stepperOptions.length"
        [data]="stepperOptions"
        [restart]="restartStepper"
        (onStepClicked)="step = $event"
      >
        <div class="form-container">
          @switch (step) { @case (Steps.email) {
          <div class="step-item">
            <form
              (ngSubmit)="submitForm(formItem['form'])"
              [formGroup]="formItem['form']"
              *validate="{ form: formItem['form'] }; let errors"
            >
              <div class="form-item">
                <app-text-input
                  [placeholder]="'E-mail'"
                  formControlName="email"
                  [className]="errors?.['email']  && 'error'"
                ></app-text-input>
              </div>
              <div class="btn">
                <app-button
                  [btnType]="'submit'"
                  [label]="'send'"
                  [isLoading]="isBtnLoading"
                ></app-button>
              </div>
            </form>
          </div>
          } @case (Steps.code) {
          <div class="step-item">
            <form
              (ngSubmit)="submitForm(formItem['form'])"
              [formGroup]="formItem['form']"
              *validate="{ form: formItem['form'] }; let errors"
            >
              <div class="form-item">
                <app-text-input
                  [placeholder]="'Verification code'"
                  formControlName="code"
                  [className]="
                    errors?.['code'] && 'error'
                  "
                ></app-text-input>
              </div>
              <div class="btn">
                <app-button
                  [btnType]="'submit'"
                  [label]="'verify'"
                  [isLoading]="isBtnLoading"
                ></app-button>
              </div>
            </form>
          </div>
          } @case (Steps.recover) {
          <div class="step-item">
            <form
              (ngSubmit)="submitForm(formItem['form'])"
              [formGroup]="formItem['form']"
              *validate="{ form: formItem['form'] }; let errors"
            >
              <div class="form-item">
                <app-text-input
                  [placeholder]="'Password'"
                  formControlName="password"
                  [inpType]="'password'"
                  [showEye]="true"
                  [className]="errors?.['password'] && 'error'"
                ></app-text-input>
              </div>
              <div class="form-item">
                <app-text-input
                  [placeholder]="'Confirm password'"
                  formControlName="confirmPassword"
                  [inpType]="'password'"
                  [showEye]="true"
                  [className]="
                    errors?.['confirmPassword'] && 'error'
                  "
                ></app-text-input>
              </div>
              <div class="btn">
                <app-button
                  [btnType]="'submit'"
                  [label]="'done'"
                  [isLoading]="isBtnLoading"
                ></app-button>
              </div>
            </form>
          </div>
          } }
        </div>
      </app-stepper>
    </div>
  </div>
</div>
